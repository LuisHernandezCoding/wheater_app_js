(()=>{"use strict";var e={426:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(81),r=n.n(a),i=n(645),o=n.n(i)()(r());o.push([e.id,"@import url(https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css);"]),o.push([e.id,'#temperature-container {\r\n  margin-left: 10px;\r\n  margin-bottom: auto;\r\n}\r\n\r\nspan#content-body-temperature.inactive {\r\n  cursor: pointer;\r\n}\r\n\r\nspan#content-body-temperature.active {\r\n  font-weight: bold;\r\n  color: #006657;\r\n  font-size: 1.2em;\r\n}\r\n\r\n.info-box.active {\r\n  background: #3085cb !important;\r\n  cursor: default !important;\r\n}\r\n\r\n.info-box {\r\n  background: #437cab !important;\r\n  color: #fff !important;\r\n  cursor: pointer;\r\n}\r\n\r\n.info-box:hover {\r\n  background: #5faded !important;\r\n  cursor: pointer;\r\n}\r\n\r\n#search-bar-button.is-loading {\r\n  content: "";\r\n  pointer-events: none;\r\n  cursor: default;\r\n}\r\n\r\n#search-bar-button.loaded {\r\n  background-image: none;\r\n  content: "Search";\r\n}\r\n\r\n#search-bar-button.is-loading::placeholder {\r\n  color: transparent;\r\n}\r\n\r\n#weather-icon {\r\n  width: 4em;\r\n  height: 4em;\r\n}\r\n\r\n#search-results {\r\n  position: absolute;\r\n  z-index: 30;\r\n  width: 100%;\r\n  top: 3.7em;\r\n}\r\n\r\n#warning-alert {\r\n  position: absolute;\r\n  z-index: 32;\r\n  top: 3.7em;\r\n}\r\n',""]);const s=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(a)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);a&&o[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),t.push(l))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var i={},o=[],s=0;s<e.length;s++){var c=e[s],d=a.base?c[0]+a.base:c[0],l=i[d]||0,u="".concat(d," ").concat(l);i[d]=l+1;var m=n(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==m)t[m].references++,t[m].updater(p);else{var v=r(p,a);a.byIndex=s,t.splice(s,0,{identifier:u,updater:v,references:1})}o.push(u)}return o}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=a(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=n(i[o]);t[s].references--}for(var c=a(e,r),d=0;d<i.length;d++){var l=n(i[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=c}}},569:e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={id:a,exports:{}};return e[a](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{var e=n(379),t=n.n(e),a=n(795),r=n.n(a),i=n(569),o=n.n(i),s=n(565),c=n.n(s),d=n(216),l=n.n(d),u=n(589),m=n.n(u),p=n(426),v={};v.styleTagTransform=m(),v.setAttributes=c(),v.insert=o().bind(null,"head"),v.domAPI=r(),v.insertStyleElement=l(),t()(p.Z,v),p.Z&&p.Z.locals&&p.Z.locals;const h=document.querySelector("#search-bar-input"),f=document.querySelector("#search-bar-button"),y=document.querySelector("#weather-icon"),g=document.querySelector("#temperature-value"),w=document.querySelector(".unit-c"),L=document.querySelector(".unit-f"),b=document.querySelector("#content-location"),x=document.querySelector("#content-date"),C=document.querySelector("#content-description"),S=document.querySelector("#content-temperature-value"),E=document.querySelector("#content-humidity-value"),k=document.querySelector("#content-wind-value"),q=document.querySelector("#temperature-button"),$=document.querySelector("#humidity-button"),T=document.querySelector("#wind-button"),I=document.querySelector("#tempChart"),N=document.querySelector("#humidityChart"),j=document.querySelector("#windChart"),H=document.getElementById("tempChart").getContext("2d"),M=document.getElementById("humidityChart").getContext("2d"),A=document.getElementById("windChart").getContext("2d");q.addEventListener("click",(()=>{q.classList.add("active"),$.classList.remove("active"),T.classList.remove("active"),I.parentElement.classList.remove("is-hidden"),N.parentElement.classList.add("is-hidden"),j.parentElement.classList.add("is-hidden")})),$.addEventListener("click",(()=>{q.classList.remove("active"),$.classList.add("active"),T.classList.remove("active"),I.parentElement.classList.add("is-hidden"),N.parentElement.classList.remove("is-hidden"),j.parentElement.classList.add("is-hidden")})),T.addEventListener("click",(()=>{q.classList.remove("active"),$.classList.remove("active"),T.classList.add("active"),I.parentElement.classList.add("is-hidden"),N.parentElement.classList.add("is-hidden"),j.parentElement.classList.remove("is-hidden")}));const P=document.querySelector("#warning-alert"),U=document.querySelector("#warning-message");async function z(){const e=await fetch("https://ipapi.co/json/");return(await e.json()).city}async function F(e){const t=`https://geocode.xyz/${e}?json=1&auth=230885744853627176559x87866`,n=await fetch(t);let a=await n.json();if(a.error&&(403===a.error.code&&(await new Promise((e=>setTimeout(e,2e3))),a=await F(e)),404===a.error.code||400===a.error.code)){P.classList.remove("is-hidden"),U.innerHTML="We couldn't find your city, so we're using your IP location instead.",await new Promise((e=>setTimeout(e,2e3)));const e=await z();a=await F(e)}return a}async function W(e,t="metric"){const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=0c5084d5e17077f9e8e3fab5e86a5fd0&units=${t}`);return await n.json()}async function Z(e,t){const n=await async function(e){const t=e.main.temp,{description:n}=e.weather[0],{icon:a}=e.weather[0],r=e.wind.speed,{humidity:i}=e.main,{pressure:o}=e.main,{coord:s}=e,{timezone:c}=e,{dt:d}=e;return{temperature:t,description:n,icon:a,wind:r,humidity:i,pressure:o,coord:s,timezone:c,dt:d}}(e);!async function(e,t){y.src=`https://openweathermap.org/img/w/${e.icon}.png`,y.alt=e.description,g.textContent=`${e.temperature.toFixed(1)}°`,b.textContent=`${t}`;const n=e.timezone/3600,a=new Date(1e3*e.dt+3600*n*1e3).toLocaleString("en-US",{timeZone:"UTC"});x.textContent=a,C.textContent=e.description,S.textContent=`${e.temperature}°`,E.textContent=`${e.humidity}%`,k.textContent=`${e.wind} m/s`}(n,t)}function O(){return null===localStorage.getItem("tempUnit")&&localStorage.setItem("tempUnit","metric"),localStorage.getItem("tempUnit")}function R(e){localStorage.setItem("tempUnit",e)}function D(e,t){return"metric"===t?5*(e-32)/9:9*e/5+32}async function B(e){if(""===e||e.length<3)return;h.disabled=!0,f.classList.add("is-loading");const t=O(),n=await F(e);if(n.error)return h.disabled=!1,f.classList.remove("is-loading"),P.classList.remove("is-hidden"),void(U.innerHTML="We couldn't find your city. Please try again.");const a=await async function(e){return e.standard.city}(n);Z(await W(a,t),a),h.disabled=!1,f.classList.remove("is-loading")}function _(){const e=[],t=new Date;t.setHours(t.getHours()+1);const n=[];for(let e=0;e<8;e+=1){const a=new Date(t);a.setHours(t.getHours()+3*e),n.push(a)}return n.forEach((t=>{e.push(`${t.getHours()}:00`)})),e}async function J(e,t,n,a,r="255, 99, 132"){const i="rgba("+r+", 0.2)",o="rgba("+r+", 1)";new Chart(t,{type:n,data:{labels:_(),datasets:[{label:e,data:a,backgroundColor:i,borderColor:o,borderWidth:3}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{ticks:{autoSkip:!0,maxTicksLimit:8,maxRotation:0,minRotation:0}}],yAxes:[{ticks:{autoSkip:!0,maxTicksLimit:5}}]}}})}document.querySelector("#warning-close").addEventListener("click",(()=>{P.classList.add("is-hidden")})),w.addEventListener("click",(()=>{w.classList.contains("active")||(w.classList.add("active"),w.classList.remove("inactive"),L.classList.remove("active"),L.classList.add("inactive"),R("metric"),g.textContent=`${D(g.textContent.slice(0,-1),"metric").toFixed(1)}°`,S.textContent=`${D(S.textContent.slice(0,-1),"metric").toFixed(1)}°`)})),L.addEventListener("click",(()=>{L.classList.contains("active")||(L.classList.add("active"),L.classList.remove("inactive"),w.classList.remove("active"),w.classList.add("inactive"),R("imperial"),g.textContent=`${D(g.textContent.slice(0,-1),"imperial").toFixed(1)}°`,S.textContent=`${D(S.textContent.slice(0,-1),"imperial").toFixed(1)}°`)})),f.addEventListener("click",(()=>{h.focus()})),h.addEventListener("keyup",(e=>{""!==h.value&&13===e.keyCode&&f.click()})),h.addEventListener("focus",(()=>{h.value=""})),h.addEventListener("input",(async()=>{if(""===h.value||h.value.length<3)return;f.classList.add("is-loading");const e=await async function(e){const t=await fetch(`http://api.geonames.org/searchJSON?name_startsWith=${e}&username=weatherapp`),n=await t.json();return n.geonames=n.geonames.filter((e=>"city, village,..."===e.fcodeName||e.population>5e3)),n.geonames=n.geonames.filter((t=>t.toponymName.toLowerCase().startsWith(e.toLowerCase()))),n.geonames=n.geonames.filter(((e,t,n)=>n.findIndex((t=>t.toponymName===e.toponymName&&t.adminName1===e.adminName1&&t.countryCode===e.countryCode))===t)),n.geonames.sort(((e,t)=>e.population>t.population?-1:e.population<t.population?1:0)),n.geonames=n.geonames.slice(0,5),n.geonames}(h.value);f.classList.remove("is-loading");const t=document.querySelector("#cities-list");t.parentElement.classList.remove("is-hidden"),t.classList.add("has-background-primary-dark"),t.innerHTML="",e.forEach((e=>{const n=e.toponymName,a=e.adminName1,r=e.countryCode,i=document.createElement("li");i.innerHTML=`\n      <div class="has-background-primary-dark">\n        <a class="dropdown-item has-text-white columns">\n          <div class="column is-8 is-offset-2">\n            <span class="icon is-small mx-4">\n              <i class="fas fa-city"></i>\n            </span>\n            <span>${n} | ${a} | ${r} </span>\n          </div>\n        </a>\n      </div>`,i.addEventListener("click",(()=>{h.value=e.toponymName,B(e.toponymName),t.parentElement.classList.add("is-hidden")})),t.appendChild(i)}))})),(async()=>{h.disabled=!0,f.classList.add("is-loading");const e=await z(),t=O();"metric"===t&&(w.classList.add("active"),L.classList.add("inactive")),"imperial"===t&&(L.classList.add("active"),w.classList.add("inactive")),Z(await W(e,t),e);const n=await async function(e,t="metric"){const n=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${e}&appid=0c5084d5e17077f9e8e3fab5e86a5fd0&units=${t}`);return await n.json()}(e,t),a=[],r=[],i=[];n.list.forEach((e=>{a.push(e.main.temp),r.push(e.main.humidity),i.push(e.wind.speed)})),a.unshift(n.list[0].main.temp),r.unshift(n.list[0].main.humidity),i.unshift(n.list[0].wind.speed),H.canvas.height=150,M.canvas.height=150,A.canvas.height=150,await J("Temperature",H,"line",a.slice(0,8),"255, 206, 86"),await J("Humidity",M,"bar",r,"54, 162, 235"),await J("Wind",A,"bar",i,"255, 99, 132"),h.disabled=!1,f.classList.remove("is-loading"),document.querySelector("#content").classList.remove("is-hidden")})()})()})();